# 【开关机】

## 开机

开机会启动许多程序。它们在Windows叫做"服务"（service），在Linux就叫做"守护进程"（daemon）。

开机成功后，它会显示一个文本登录界面，这个界面就是登录界面。

登录界面中会提示用户输入用户名，而用户输入的用户将作为参数传给login程序来验证用户的身份，密码是不显示的，输完回车即可。

**一般来说，用户的登录方式有三种：**

- 命令行登录
- ssh登录
- 图形界面登录

最高权限账户为 root，可以操作一切

## 关机

在linux领域内大多用在服务器上，很少遇到关机的操作。毕竟服务器上跑一个服务是永无止境的，除非特殊情况下，不得已才会关机。

关机指令为：shutdown

不管是重启系统还是关闭系统，首先要运行 sync 命令，把内存中的数据写到磁盘中。

```shell
sync # 将数据由内存同步到硬盘中。

shutdown # 关机指令，你可以man shutdown 来看一下帮助文档。例如你可以运行如下命令关机：

shutdown –h 10 # 这个命令告诉大家，计算机将在10分钟后关机

shutdown –h now # 立马关机

shutdown –h 20:25 # 系统会在今天20:25关机

shutdown –h +10 # 十分钟后关机

shutdown –r now # 系统立马重启

shutdown –r +10 # 系统十分钟后重启

reboot # 就是重启，等同于 shutdown –r now

halt # 关闭系统，等同于shutdown –h now 和 poweroff
```

**ps:在linux系统中，没有错误即成功**

# 【目录结构】

> Linux目录结构是一个树形结构
>
> Windows系统可以拥有多个盘符，如 C盘、D盘、E盘
>
> Linux没有盘符的概念，只有一个根目录`/`
>
> **在Linux中：**
>
> - 一切皆文件
> - 根目录`/`，所有的文件都挂载在这个节点下
>
> **Linux路径描述方式：**
>
> - Linux中采用`/`表示
> - Windows采用`\`表示

登录系统后，在当前命令窗口下输入命令：

```shell
ls /
```

得到：

![image-20210722194658734](https://gitee.com/dong-dameng/images/raw/master/img/image-20210722194658734.png)

树状目录结构：Linux的一切资源都挂载在这个`/`根节点下

![640](https://gitee.com/dong-dameng/images/raw/master/img/640.png)

**以下是对这些目录的解释：**

|     目录      |                             解释                             |
| :-----------: | :----------------------------------------------------------: |
|    `/bin`     |      bin是Binary的缩写, 这个目录存放着最经常使用的命令       |
|    `/boot`    | 这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。 |
|    `/dev`     | ev是Device(设备)的缩写, 存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。 |
|    `/etc`     | 这个目录用来存放所有的系统管理所需要的配置文件和子目录。比如Redis的配置文件等 |
|    `/home`    | 用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的 |
|    `/lib`     | 这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。 |
| `/lost+found` | 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件（存放突然关机的文件） |
|               |                                                              |
|               |                                                              |
|               |                                                              |
|               |                                                              |
|               |                                                              |
|               |                                                              |
|               |                                                              |

- **/media**：linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。

- **/mnt**：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。

  我跟会把一些本地的文件挂载在这个目录下

- **/opt：这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。**

- **/proc**：这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息（不用管）。

- **/root：该目录为系统管理员，也称作超级权限者的用户主目录。**

- **/sbin**：Super User的意思，这里存放的是系统管理员使用的系统管理程序。

- **/srv**：该目录存放一些服务启动之后需要提取的数据。

- **/sys**：这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统 sysfs 。

- **/tmp：这个目录是用来存放一些临时文件的。用完即丢的文件可以放在这个目录下**

- **/usr：这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。**

- **/usr/bin：** 系统用户使用的应用程序。

- **/usr/sbin：** 超级用户使用的比较高级的管理程序和系统守护程序。

- **/usr/src：** 内核源代码默认的放置目录。

- **/var：这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。**

- **/run**：是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。

- **/www：存放服务器网站相关的资源，环境**

# 【基本命令】

> **命令行：**即Linux终端（Terminal），是一种命令提示符页面。以纯“字符”形式操作系统，可以使用各种字符化命令对系统发出操作指令。
>
> **命令：**即Linux程序。一个命令就是一个Linux程序。命令没有图形化界面，可以再命令行（终端）中获得字符化反馈。
>
> 可以使用 *man [命令]* 来查看各个命令的使用文档，如 ：`man cp`。

## 通用格式

**命令通用格式：**

```shell
command [-options] [parameter]
```

- `command`：命令本身
- `-options`：[可选，非必填]，命令的一些选项，可以通过选项控制命令的行为细节
- `parameter`：[可选，非必填]，命令的参数，多数用于命令的指向目标等

## 目录/文件管理

> - **绝对路径：**以根目录为起点
>
> 路径的写法，由根目录 / 写起，例如：/usr/share/doc 这个目录。
>
> - **相对路径：**以当前目录为起点
>
> 路径的写法，不是由 / 写起，例如由 /usr/share/doc 要到 /usr/share/man 底下时，可以写成：cd ../man 这就是相对路径的写法
>
> **Xshell7中，白色代表文件，蓝色代表目录**
>
> `clear`：清屏

**常用命令：**

- `ls`: 列出目录

  ```shell
  ls [-a -l -h] [Linux目录]
  ```

  - `-a`：all，查看全部的文件，包括隐藏文件（隐藏文件以`.`开头）

  - `-l`：以列表形式列出所有的文件，包含文件的属性和权限，不包括隐藏文件
  - `-h`：以易于阅读的方式列出带单位的存储大小，需要和`-l`一起使用

  - 参数可以组合使用，比如`ls -a -l`或`ls -la`

  - 不使用选项和参数，表示以平铺形式列出当前工作目录下的内容

    

- `cd`：切换目录（绝对路径都是以/开头）

    Change Directory

    ```shell
    cd [Linux路径]
    # 不写参数，表示回到用户的家目录
    ```

    - `/`：根目录
    - `./`：当前目录
    - `../`：上一级目录
    - `~`：当前用户的家目录
        - 对于root用户，`cd ~`相当于`cd /root`
        - 对于普通用户，`cd ~`相当于`cd /home/当前用户名`



- `pwd`：显示当前所在的目录

    Print Work Directory

    

- `mkdir`：创建一个新的目录

    ```shell
    mkdir [-p] Linux路径
    ```

    Make Directory

    - `-p`：递归创建多级目录（即父目录不存在会自动创建父目录），如`mkdir -p /test/test1`



- `rmdir`：删除一个空的目录

    ```shell
    rmdir [-p] Linux路径
    ```

    Remove Directory

    - `-p`：递归删除多级目录，如`rmdir -p /test/test1`
    - 仅能删除空的目录，如果下面存在文件，需要先删除文件



- `touch`：创建文件

    ```shell
    touch Linux路径
    ```

    touch命令参数表示要创建的文件路径



- `cp`: 复制文件或目录:

    Copy

    ```shell
    cp [-r] 参数1(old路径) 参数2(new路径)
    ```

    - `-r`：表示可以复制文件夹
    - 如果文件重复，选择覆盖( y )或放弃( n )



- `rm`: 移除文件或目录

    ```shell
    rm [-fri] 目标文件/目录
    ```

    - `-f`：不会出现警告，强制删除
    - `-r` ：递归删除目录
    - `-i`：互动，删除询问是否删除
    - `rm -rf /`：**核弹！！！删除所有文件，删库跑路备用**

    - **通配符：**模糊匹配

      - `test*`：匹配任何以test开头的内容
      - `*test`：匹配任何以test结尾的内容
      - `*test*`：匹配任何包含test的内容

      

- `mv`: 移动文件与目录，或修改文件与目录的名称

  Move

  - `-f`：强制移动

  - `-u`：只替换已经更新过的文件

  - **如果新目录不存在，则执行重命名操作**

    两个文件执行重命名操作，比如`mv test0 test/test1`

    test目录存在，但test1目录不存在，则移动test0到test，并重命名为test1


## 文件查看

Linux系统中使用以下命令来查看文件的内容：

- `cat` 由第一行开始显示文件内容
- `tac` 从最后一行开始显示，可以看出 tac 是 cat 的倒着写！
- `nl`  显示的时候，顺道输出行号！
- `more` 一页一页的显示文件内容
- `less` 与 `more` 类似，但是比 more 更好的是，他可以往前翻页！
- `head` 只看头几行
- `tail` 只看尾巴几行

可以使用 *man [命令]*来查看各个命令的使用文档，如 ：man cp。

### cat

```shell
cat [-AbEnTv]
```

选项与参数：

- `-A` ：相当於 -vET 的整合选项，可列出一些特殊字符而不是空白而已；
- `-b` ：列出行号，仅针对非空白行做行号显示，空白行不标行号！
- `-E` ：将结尾的断行字节 $ 显示出来；
- `-n` ：列印出行号，连同空白行也会有行号，与 -b 的选项不同；
- `-T` ：将 [tab] 按键以 ^I 显示出来；
- `-v` ：列出一些看不出来的特殊字符

测试：

```shell
# 查看网络配置: 文件地址 /etc/sysconfig/network-scripts/
[root@iZuf6hnmsxi97or8gnhw1gZ ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=eth0
BOOTPROTO=dhcp
ONBOOT=yes
```

### tac

tac与cat命令刚好相反，文件内容从最后一行开始显示，tac 也恰好是cat的倒着写

### nl

语法：

```shell
nl [-bnw] 文件
```

选项与参数：

- `-b` ：指定行号指定的方式，主要有两种：
  - `-b a` ：表示不论是否为空行，也同样列出行号(类似 cat -n)；
  - `-b t` ：如果有空行，空的那一行不要列出行号(默认值)；

- `-n` ：列出行号表示的方法，主要有三种：
  - `-n ln` ：行号在荧幕的最左方显示；
  - `-n rn` ：行号在自己栏位的最右方显示，且不加 0；
  - `-n rz` ：行号在自己栏位的最右方显示，且加 0 ；

- -w ：行号栏位的占用的位数。

### `more`

在 more 这个程序的运行过程中，你有几个按键可以按的：

- 空白键 (space)：代表向下翻一页；
- Enter ：代表向下翻『一行』；
- /字串 ：代表在这个显示的内容当中，向下搜寻『字串』这个关键字；
- :f ：立刻显示出档名以及目前显示的行数；
- q ：代表立刻离开 more ，不再显示该文件内容。
- b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。

```shell
[root@iZuf6hnmsxi97or8gnhw1gZ ~]# more /etc/csh.login
....(中间省略)....
--More--(28%) # 光标也会在这里等待命令
```

### `less`

less运行时可以输入的命令有：

- 空白键 ：向下翻动一页；
- [pagedown]：向下翻动一页；
- [pageup] ：向上翻动一页；
- /字串 ：向下搜寻『字串』的功能；
- ?字串 ：向上搜寻『字串』的功能；
- n ：重复前一个搜寻 (与 / 或 ? 有关！)
- N ：反向的重复前一个搜寻 (与 / 或 ? 有关！)
- q ：离开 less 这个程序；

```shell
[root@iZuf6hnmsxi97or8gnhw1gZ ~]# more /etc/csh.login
....(中间省略)....
:   # 这里可以等待你输入命令！
```

### `head`

语法：

```shell
head [-n number] 文件
```

选项与参数：**-n** 后面接数字，代表显示几行的意思！

默认的情况中，显示前面 10 行！若要显示前 20 行，就得要这样：

```shell
[root@iZuf6hnmsxi97or8gnhw1gZ ~]# head -n 20 /etc/csh.login
```

### `tail`

语法：

```shell
tail [-n number] 文件
```

选项与参数：

- -n ：后面接数字，代表显示几行的意思

默认的情况中，显示最后 10 行！若要显示最后 20 行，就得要这样：

```shell
[root@iZuf6hnmsxi97or8gnhw1gZ ~]# tail -n 20 /etc/csh.login
```

## 查找路径

### 查找命令

> Linux命令本体就是一个个二进制可执行程序，与windows系统中的.exe文件是一个意思
>
> 可以通过which命令查看这些命令的程序文件存放在哪里

```shell
which 要查找的命令
```

### 查找文件

- ```shell
  find 起始路径 -name "被查找的文件名"
  ```

  ![image-20230516145012627](https://chongming-images.oss-cn-hangzhou.aliyuncs.com/images-masterimage-20230516145012627.png)

  - 支持通配符`*`进行模糊匹配

- ```shell
  find 起始路径 -size +/-n[kMG]
  ```

  - `+` `-`表示大于和小于
  - `n`表示大小数字
  - kMG表示大小单位，即kb、mb、gb（注意k是小写）

## 文件内容查找

### 查找-grep

> grep命令，从文件中通过关键字过滤文件行
>
> 查找该关键字在文件的第几行

```shell
grep [-n] 关键字 文件路径
```

- 选项`-n`，可选，表示在结果中显示匹配的行的行号
- 参数，关键字，必填，表示过滤的关键字，带有空格或其他特殊符号，建议使用`""`将关键字包围起来
- 参数，文件路径，必填，表示要过滤内容的文件路径，**可作为管道符的内容输入端口**

![image-20230516150423192](https://chongming-images.oss-cn-hangzhou.aliyuncs.com/images-masterimage-20230516150423192.png)

### 统计-wc

> 可以通过wc命令统计文件的行数、单词数量等
>
> 文件路径同样可以作为管道符的内容输入端口

```shell
wc [-c -m -l -w] 文件路径
```

- -c，统计bytes数量
- -m，统计字符数量
- -l，统计行数
- -w，统计单词数量

## 管道符

**管道符：`|`**

**含义：将管道符左边命令的结果，作为右边命令的输入**

只要能产生内容输出的命令，其执行结果都可以作为命令结果

**举例：**

```shell
grep [-n] 关键字 文件路径
# 文件路径位置，可以作为内容输入端口
# 所以可以执行以下命令
cat test | grep -n "could"
```

![image-20230516151217116](https://chongming-images.oss-cn-hangzhou.aliyuncs.com/images-masterimage-20230516151217116.png)

## 输出-echo

> 可以使用echo命令在命令行中输出指定内容
>
> 好比c的print函数

```shell
echo 输出的内容
```

输出内容比较复杂的话建议用双引号包裹

## 反引号

被**\`\`**包围的字符会作为命令执行

![image-20230516152313906](https://chongming-images.oss-cn-hangzhou.aliyuncs.com/images-masterimage-20230516152313906.png)

## 重定向符

- `>`：将左侧命令的结果，覆盖写入到符号右侧指定的文件中

  ![image-20230516152536656](https://chongming-images.oss-cn-hangzhou.aliyuncs.com/images-masterimage-20230516152536656.png)

- `>>`：将左侧命令的结果，追加写入到符号右侧指定的文件中

![image-20230516152555227](https://chongming-images.oss-cn-hangzhou.aliyuncs.com/images-masterimage-20230516152555227.png)

## 跟踪-tail

> 使用tail命令，可以查看文件尾部内容，跟踪文件的更改
>
> 可以用来跟踪事实日志

```shell
tail [-f -num] Linux路径
```

- 参数，Linux命令，表示被跟踪的文件路径
- 选项，-f，表示持续跟踪
- 选项，-num，表示查看尾部多少行，这里的num指的是具体的数字
- `ctrl+c`快捷键停止追踪

# 【vim编辑器】

## 简介

vim是从 vi 发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。

简单的来说， vi 是老式的字处理器，不过功能已经很齐全了，但是还是有可以进步的地方。

vim 则可以说是程序开发者的一项很好用的工具。

所有的 Unix Like 系统都会内建 vi 文书编辑器，其他的文书编辑器则不一定会存在。

vim 的官方网站 (http://www.vim.org) 自己也说 vim 是一个程序开发工具而不是文字处理软件。

- 

## 使用模式

```shell
vim filename # 打开/新建一个文件
```

如果文件不存在，则会创建一个新文件用来编辑

**vim三种工作模式：**

![image-20230516153748785](https://chongming-images.oss-cn-hangzhou.aliyuncs.com/images-masterimage-20230516153748785.png)

- **命令模式：**

  命令模式下，所敲的按键都被理解为命令，以命令驱动执行不同的功能

- **输入模式：**

  编辑模式，此模式下可以对文件内容进行自由编辑

- **底线命令模式：**

  以`:`开始，通常用于文件的保存、退出

### 命令模式

用户刚刚启动 vi/vim，便进入了命令模式。

此状态下敲击键盘动作会被vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。

以下是常用的几个命令：

- `i` 切换到输入模式，以输入字符。
- `x` 删除当前光标所在处的字符。
- `:` 切换到底线命令模式，以在最底一行输入命令。
- `ESC`退出编辑模式，进入命令模式

若想要编辑文本：启动vim，进入了命令模式，按下i，切换到输入模式。

命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。

### 输入模式

在命令模式下按下i就进入了输入模式。

在输入模式中，可以使用以下按键：

- **字符按键以及Shift组合**，输入字符
- **ENTER**，回车键，换行
- **BACK SPACE**，退格键，删除光标前一个字符
- **DEL**，删除键，删除光标后一个字符
- **方向键**，在文本中移动光标
- **HOME**/**END**，移动光标到行首/行尾
- **Page Up**/**Page Down**，上/下翻页
- **Insert**，切换光标为输入/替换模式，光标将变成竖线/下划线
- **ESC**，退出输入模式，切换到命令模式

### 底线命令模式

在命令模式下按下:（英文冒号）就进入了底线命令模式。

底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

在底线命令模式中，基本的命令有（已经省略了冒号）：

- `q` 退出程序
- `w` 保存文件
- `wq`保存并退出

按`ESC`键可随时退出底线命令模式。

## 常用快捷键

### 光标定位、翻页

| 快捷键 |           操作            |   说明   |
| :----: | :-----------------------: | :------: |
|   0    |     将光标定位在行首      | 命令模式 |
|   $    |        定位到行尾         | 命令模式 |
| ctrl+→ |      向右跳一个单词       |          |
| ctrl+← |      向左跳一个单词       |          |
|  n+gg  | 跳转到某一行，不需要按住  | 命令模式 |
|  Pgup  | 向上翻页（ctrl+f，front） |          |
|  Pgdn  | 向下翻页（ctrl+b，back）  |          |

### 撤销、删除

|   快捷键    |      操作      |     说明     |
| :---------: | :------------: | :----------: |
|      u      |      撤销      |              |
|   ctrl+r    | 恢复（反撤销） |              |
|     dd      |    删除一行    |              |
| :首行,尾行d |    删除多行    | 底线命令模式 |

### 复制、剪切、粘贴、选中

| 快捷键 |            操作            | 说明 |
| :----: | :------------------------: | ---- |
|   yy   |       复制光标所在行       |      |
|  nyy   |   复制所在行开始向下n行    |      |
|   dd   |         剪切所在行         |      |
|  ndd   |   剪切所在行开始向下n行    |      |
|   v    |  开始选中，可以配合yy复制  |      |
|  ggVG  | (g+g+按住CapsLock+v+g)全选 |      |
|   p    |            粘贴            |      |

### 其他

| 快捷键 |              操作              | 说明 |
| :----: | :----------------------------: | :--: |
|  /abc  | 查找"abc"并高亮，按n查找下一个 |      |
| :nohl  |          取消查找高亮          |      |



# 【用户权限】

## root管理员

> root用户拥有最大的系统操作权限，而普通用户在许多地方的权限时受限的
>
> 普通用户的权限，一般在其home目录内不受限，一旦出了home目录，大多数地方，普通用户今有只读和执行权限，无修改权限

## 切换用户-su

```shell
su [-] [用户名]
```

- `-`符号可选，表示是否在切换用户后加载环境变量，建议带上
- 参数：用户名，表示要切换的用户，用户名省略表示切换到root
- 切换用户后，可以通过exit命令退回上一个用户，也可以使用快捷键ctrl+d

- 普通用户切换到其他用户需要输入密码

  root用户切换到其他用户不需要输入密码

## 临时权限-sudo

```shell
sudo 命令
```

- sudo可以为普通命令授权，临时以root身份执行该命令
- 并不是所有用户都有使用sudo的权限，需要为普通用户给分配sudo认证

**配置sudo认证：**

- 切换到root用户，执行visudo命令

- vi编辑器会打开：/etc/sudoers

- 在文件最后添加

  ```shell
  用户名 ALL=(ALL) NOPASSWD:ALL
  # 取消认证只需要删除此行
  ```

- 通过:wq保存

- 切换回普通用户

- 执行sudo命令

## 用户/用户组

> Linux系统中可以：
>
> - 配置多个用户
> - 配置多个用户组
> - 用户可以加入多个用户组
>
> **Linux中关于权限的管控级别有2个级别：**
>
> - 针对用户的权限控制
> - 针对用户组的权限控制
>
> 针对某文件，可以控制用户的权限，也可以控制用户组的权限

- `getent passwd`命令查看当前系统有哪些用户

  结果信息：

  用户名：密码(x)：用户ID：组ID：描述信息（无用）：HOME目录：执行终端（默认bash）

- `getent group`命令查看当前系统中有哪些用户组

  结果信息：

  组名称：组认证(显示为x)：组id：用户

### 用户

- **创建用户（root权限）：**

  ```shell
  # 在usr下生成一个对应用户的文件夹
  useradd 用户名
  # 进入账号目录
  cd /usr/用户名/
  # 修改用户密码
  passwd 用户名
  # 输入两次密码设定密码
  ```

  `useradd [-g -d] 用户名`

  - -g：加入指定用户组，默认加入[用户名]的用户组
  - -d：指定home目录，默认放在/home/用户名

- **删除用户（root权限）：**

  ```shell
  userdel -r 用户名
  ```

  - -r：删除用户的home目录，不使用会保留home目录

- **查看用户所属组**

  ```shell
  id[用户名]
  ```

  - 参数不写表示查看当前用户的所属组

- **修改用户所属组**

  ```shell
  usermod -ag 用户组 用户名
  ```

  将指定用户加入到指定用户组

### 用户组

**创建用户组：**

```shell
groupadd 用户组名
```

**删除用户组：**

```
groupdel 用户组名
```

## 权限控制

### 查看权限

Linux系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。为了保护系统的安全性，Linux系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。

**在Linux中可以使用`ll`或者`ls –l`命令来显示一个文件的属性以及文件所属的用户和组（权限管控信息）**

![image-20210722203223026](https://gitee.com/dong-dameng/images/raw/master/img/image-20210722203223026.png)

- **第一列：**表示文件、文件夹的权限控制信息（文件属性）
- **第三列：**表示文件、文件夹所属用户
- **第四列：**表示文件、文件夹所属用户组

### 权限信息

![1699970-20190616125146973-273227113](https://gitee.com/dong-dameng/images/raw/master/img/1699970-20190616125146973-273227113.png)

- **第一个字符：**

  在Linux中第一个字符代表这个文件是目录、文件或链接文件等

  - **当为[ d ]则是目录**

  - **当为[ - ]则是文件；**

  - **若是[ l ]则表示为链接文档 ( link file )；**

  - [ **b** ]则表示为装置文件里面的可供储存的接口设备 ( 可随机存取装置 )；

  - [ **c** ]则表示为装置文件里面的串行端口设备，例如键盘、鼠标 ( 一次性读取装置 )。

- **属主：**所属的用户，文档所有者，这是一个账户，这是一个人

- **属组：**所属的用户组，文档所有者所在的组，这是一个组

- **后三个字符：**

  接下来的字符中，以三个为一组，且均为『rwx』 的三个参数的组合，分别表示**属主**、**属组**和**其他用户**的权限

  这三个权限的位置不会改变，如果没有权限，就会出现减号[ - ]而已。

  - `r`：可读(read)

    - 文件可读

    - 文件夹可查看内容，如ls命令

  - `w`：可写(write)
    - 文件可修改
    - 文件夹可在文件夹内创建、修改、重命名等操作

  - `x`：可执行(execute)
    - 针对文件，可作为程序执行
    - 针对文件夹，表示可更改工作目录到此文件夹

### 修改权限



# 文件查看和修改

### 修改文件属性

**1、chgrp：更改文件属组**

```shell
chgrp [-R] 属组名 文件名
```

-R：递归更改文件属组，就是在更改某个目录文件的属组时，如果加上-R的参数，那么该目录下的所有文件的属组都会更改。

**2、chown：更改文件属主，也可以同时更改文件属组**

```shell
chown [–R] 属主名 文件名
chown [-R] 属主名：属组名 文件名
```

**3、chmod：更改文件9个属性** **很重要！！！**

```shell
chmod [-R] xyz 文件或目录
```

Linux文件属性有两种设置方法，一种是数字（常用），一种是符号。

Linux文件的基本权限就有九个，分别是owner/group/others三种身份各有自己的read/write/execute权限。

文件的权限字符为：『-rwxrwxrwx』， 这九个权限是三个三个一组的！其中，我们可以使用数字来代表各个权限，各权限的分数对照表如下：

```shell
r:4     w:2       x:1

可读可写不可执行 rw- 6
```

每种身份(owner/group/others)各自的三个权限(r/w/x)分数是需要累加的，例如当权限为：[-rwxrwx---] 分数则是：

- owner = rwx = 4+2+1 = 7
- group = rwx = 4+2+1 = 7
- others= --- = 0+0+0 = 0

```
chmod 770 filename
```

## Linux 链接概念

Linux 链接分两种，一种被称为硬链接（Hard Link），另一种被称为符号链接（Symbolic Link）。

情况下，**ln** 命令产生硬链接。

**硬连接**

硬连接指通过索引节点来进行连接。在 Linux 的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(Inode Index)。在 Linux 中，多个文件名指向同一索引节点是存在的。比如：A 是 B
的硬链接（A 和 B 都是文件名），则 A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号相同，即一个 inode 节点对应两个不同的文件名，两个文件名指向同一个文件，A 和 B
对文件系统来说是完全平等的。删除其中任何一个都不会影响另外一个的访问。

硬连接的作用是允许一个文件拥有多个有效路径名，这样用户就可以建立硬连接到重要文件，以防止“误删”的功能。其原因如上所述，因为对应该目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个连接被删除后，文件的数据块及目录的连接才会被释放。也就是说，文件真正删除的条件是与之相关的所有硬连接文件均被删除。

**软连接**

另外一种连接称之为符号连接（Symbolic Link），也叫软连接。软链接文件有类似于 Windows 的快捷方式。它实际上是一个特殊的文件。在符号连接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。比如：A 是 B
的软链接（A 和 B 都是文件名），A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号不相同，A 和 B 指向的是两个不同的 inode，继而指向两块不同的数据块。但是 A 的数据块中存放的只是 B
的路径名（可以根据这个找到 B 的目录项）。A 和 B 之间是“主从”关系，如果 B 被删除了，A 仍然存在（因为两个是不同的文件），但指向的是一个无效的链接。

**测试：**

```
[root@kuangshen /]# cd /home
[root@kuangshen home]# touch f1 # 创建一个测试文件f1
[root@kuangshen home]# ls
f1
[root@kuangshen home]# ln f1 f2     # 创建f1的一个硬连接文件f2
[root@kuangshen home]# ln -s f1 f3   # 创建f1的一个符号连接文件f3
[root@kuangshen home]# ls -li       # -i参数显示文件的inode节点信息
397247 -rw-r--r-- 2 root root     0 Mar 13 00:50 f1
397247 -rw-r--r-- 2 root root     0 Mar 13 00:50 f2
397248 lrwxrwxrwx 1 root root     2 Mar 13 00:50 f3 -> f1
```

从上面的结果中可以看出，硬连接文件 f2 与原文件 f1 的 inode 节点相同，均为 397247，然而符号连接文件的 inode 节点不同。

```
# echo 字符串输出 >> f1 输出到 f1文件
[root@kuangshen home]# echo "I am f1 file" >>f1
[root@kuangshen home]# cat f1
I am f1 file
[root@kuangshen home]# cat f2
I am f1 file
[root@kuangshen home]# cat f3
I am f1 file
[root@kuangshen home]# rm -f f1
[root@kuangshen home]# cat f2
I am f1 file
[root@kuangshen home]# cat f3
cat: f3: No such file or directory
```

通过上面的测试可以看出：当删除原始文件 f1 后，硬连接 f2 不受影响，但是符号连接 f1 文件无效；

依此您可以做一些相关的测试，可以得到以下全部结论：

- 删除符号连接f3,对f1,f2无影响；
- 删除硬连接f2，对f1,f3也无影响；
- 删除原文件f1，对硬连接f2没有影响，导致符号连接f3失效；
- 同时删除原文件f1,硬连接f2，整个文件会真正的被删除。



